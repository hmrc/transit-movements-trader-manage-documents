@import views.xml.DocumentTemplate
@import refactor.views.xml.p4.tad.components._
@import views.xml.PageOne
@import refactor.views.xml.p4.tad.components.second_page
@import refactor.viewmodels.p4.tad.P4TadPdfViewModel

@this(
        mainHeader: table_1.table,
        table2: table_2.table,
        table3: table_3.table,
        table4: table_4.table,
        table5: table_5.table,
        template: DocumentTemplate,
        pageOne: PageOne,
        pageTwo: second_page.table
)

@(tadModel: viewmodels.TransitAccompanyingDocumentPDF, vm: P4TadPdfViewModel)
@template(
    pageOne = pageOne(pageOneBody),
    pageTwo =  if(vm.printListOfItems) {
        Some(pageTwo(
            vm.secondPageViewModel,
            vm.mrn
        ))
    } else None
)

@pageOneBody = {
    <!--main header-->
    @mainHeader(
        vm = vm.table1ViewModel,
        mrn = vm.mrn,
        printListOfItems = vm.printListOfItems,
        title = "TRANSIT - ACCOMPANYING DOCUMENT"
    )

    <!--packages/goods description/docs/certs-->
    @table2(vm.printListOfItems, tadModel.numberOfItems, tadModel.goodsItems, tadModel.grossMass, tadModel.printBindingItinerary)

    <!--transhipment/certification-->
    @table3()

    <!--Principal/TIR Holder/Office of departure-->
    @table4(
        tadModel.principal,
        tadModel.departureOffice.reference,
        tadModel.acceptanceDate.map(_.formattedDate),
        tadModel.customsOfficeOfTransit,
        tadModel.guaranteeDetails,
        Some(tadModel.destinationOffice),
        tadModel.authId,
        tadModel.controlResult
    )

    <!--control by office of departure/destination-->
    @table5(tadModel.seals, tadModel.printBindingItinerary, tadModel.controlResult)
}
