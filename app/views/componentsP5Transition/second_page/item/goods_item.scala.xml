@import views.xml.componentsP5Transition.second_page.item._
@import views.xml.componentsP5Transition.{item => componentItem}

@(goodsItem: viewmodels.GoodsItemP5Transition, declarationType: DeclarationType, authId: Option[String])
<fo:table width="100%" table-layout="fixed">
    <fo:table-column column-width="28mm"/>
    <fo:table-column column-width="28mm"/>
    <fo:table-column column-width="28mm"/>
    <fo:table-column column-width="28mm"/>
    <fo:table-column column-width="78mm"/>
    <fo:table-body>
        <fo:table-row height="3.5mm">
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" display-align="center" padding-left="2mm">
                <fo:block>
                @goodsItem.itemNumber
                </fo:block>
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center" wrap-option="wrap" >
                    @if(goodsItem.packages.toList.length > 1) {
                        @block(s"${goodsItem.packages.head.shippingMarks.getOrElse("")}...")
                    } else {
                        @block(s"${goodsItem.packages.head.shippingMarks.getOrElse("")}")
                    }
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                @if(goodsItem.packages.toList.length > 1) {
                @block(s"${goodsItem.packages.head.numberOfPackages.getOrElse(goodsItem.packages.head.typeOfPackages)}...")
                } else {
                @block(s"${goodsItem.packages.head.numberOfPackages.getOrElse(goodsItem.packages.head.typeOfPackages)}")
                }
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                @if(goodsItem.containers.nonEmpty) {
                    @if(goodsItem.containers.length > 1) {
                        @block(s"${goodsItem.containers.head.split(",").last}...")
                    } else {
                        @block(s"${goodsItem.containers.head.split(",").last}")
                    }
                } else {
                    <fo:block>&#160;</fo:block>
                }
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                <fo:block>
                    @goodsItem.description
                </fo:block>
            </fo:table-cell>
        </fo:table-row>
        <fo:table-row height="3.5mm">
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                <fo:block>
                    @declarationType
                </fo:block>
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                <fo:block>
                   @goodsItem.commodityCode.getOrElse("--")
                </fo:block>
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">

                    <fo:block>&#160;</fo:block>

            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">

                    <fo:block>&#160;</fo:block>

            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                @if(goodsItem.previousDocuments.nonEmpty){
                    @if(goodsItem.previousDocuments.length > 1) {
                        @block(s"${goodsItem.previousDocuments.head.toStringItem}...")
                    } else {
                        @block(s"${goodsItem.previousDocuments.head.toStringItem}")
                    }
                } else {
                    <fo:block>&#160;</fo:block>
                }
            </fo:table-cell>
        </fo:table-row>
        <fo:table-row height="3.5mm">
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                @if(goodsItem.countryOfDispatch.nonEmpty) {
                    @goodsItem.countryOfDispatch.map(country => block(country.code))
                } else {
                    <fo:block>&#160;</fo:block>
                }
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                @if(goodsItem.countryOfDestination.nonEmpty) {
                    @goodsItem.countryOfDestination.map(country => block(country.code))
                } else {
                    <fo:block>&#160;</fo:block>
                }
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                <fo:block>
                    @goodsItem.grossMass.getOrElse("")
                </fo:block>
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" padding-left="2mm" display-align="center">
                <fo:block>
                    @goodsItem.netMass.getOrElse("")
                </fo:block>
            </fo:table-cell>
            <fo:table-cell border-style="solid" border-width="1pt" border-color="black" display-align="center" padding-top="0.5mm">
                <fo:table width="100%">
                    <fo:table-column column-width="69mm"/>
                    <fo:table-body>
                        <fo:table-row>
                            <fo:table-cell padding-left="2mm">
                                @if(goodsItem.transportDocuments.nonEmpty) {
                                    @if(goodsItem.transportDocuments.length > 1) {
                                        @block(s"${goodsItem.transportDocuments.head.toString}...")
                                    } else {
                                        @block(s"${goodsItem.transportDocuments.head.toString}")
                                    }
                                } else {
                                    <fo:block>&#160;</fo:block>
                                }

                                @if(goodsItem.supportingDocuments.nonEmpty) {
                                    @if(goodsItem.supportingDocuments.length > 1) {
                                        @block(s"${goodsItem.supportingDocuments.head.toString}...")
                                    } else {
                                        @block(s"${goodsItem.supportingDocuments.head.toString}")
                                    }
                                } else {
                                    <fo:block>&#160;</fo:block>
                                }

                                @if(goodsItem.additionalInformation.nonEmpty) {
                                    @if(goodsItem.additionalInformation.length > 1) {
                                        @block(s"${goodsItem.additionalInformation.head.toString}...")
                                    } else {
                                        @block(s"${goodsItem.additionalInformation.head.toString}")
                                    }
                                } else {
                                    <fo:block>&#160;</fo:block>
                                }

                                @if(goodsItem.additionalReferences.nonEmpty) {
                                    @if(goodsItem.additionalReferences.length > 1) {
                                        @block(s"${goodsItem.additionalReferences.head.toString}...")
                                    } else {
                                        @block(s"${goodsItem.additionalReferences.head.toString}")
                                    }
                                } else {
                                    <fo:block>&#160;</fo:block>
                                }

                                @block(authId.getOrElse(""))
                            </fo:table-cell>
                        </fo:table-row>
                    </fo:table-body>
                </fo:table>
            </fo:table-cell>
        </fo:table-row>
        <fo:table-row height="3.5mm">
            <fo:table-cell border-bottom-style="solid" border-bottom-width="1.25pt" border-bottom-color="black" number-columns-spanned="5">
                <fo:block>
                    <fo:table width="100%" table-layout="fixed">
                        <fo:table-column column-width="95mm"/>
                        <fo:table-column column-width="95mm"/>
                        <fo:table-body>
                            <fo:table-row height="3.5mm">
                                <fo:table-cell border-style="solid" border-width="1pt" border-color="black" display-align="center" padding-left="2mm">
                                    @if(goodsItem.consignor.nonEmpty) {

                                        @goodsItem.consignor.map(x => consignor(x))
                                    } else {
                                        <fo:block>&#160;</fo:block>
                                    }
                                </fo:table-cell>
                                <fo:table-cell border-style="solid" border-width="1pt" border-color="black" display-align="center" padding-left="2mm">
                                    @if(goodsItem.consignee.nonEmpty) {
                                        @goodsItem.consignee.map(x => consignee(x))
                                    } else {
                                        <fo:block>&#160;</fo:block>
                                    }
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-body>
                    </fo:table>
                </fo:block>
            </fo:table-cell>
        </fo:table-row>
    </fo:table-body>
</fo:table>